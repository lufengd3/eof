{"version":3,"sources":["webpack:///webpack/bootstrap 4613f37b7af6fecad068","webpack:///./src/index.js","webpack:///./src/Parser.js","webpack:///./src/utils.js","webpack:///./src/DataProxy.js"],"names":[],"mappings":"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","file":"EOF.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4613f37b7af6fecad068\n **/","import Parser from 'Parser'\nimport DataProxy from 'DataProxy'\nimport { isObjEqual } from 'utils'\n\nexport default class EOF {\n  /**\n   * @param {String} elmId\n   * @param {Object} data\n   */\n  constructor(elmId, data) {\n    this.version = '0.0.2'\n\n    this._doc = document.currentScript.ownerDocument\n    this._tpl = this._doc.querySelector(`#${elmId}`)\n    this.data = data\n    this.name = elmId\n    this._dataKey\n    \n    this._init();\n  }\n\n  _init() {\n    let self = this\n    let tpl = this._tpl\n    let tplParser = new Parser(tpl, this.data)\n    let result = tplParser.parse()\n    let tplContent = result.tplContent\n    this._dataKey = result.dataKey\n    \n    if (!tpl) {\n      throw new Error(`Can't find template Node: ${this.name}`)\n    }\n\n    let proto = Object.create(HTMLElement.prototype, {\n      createdCallback: {\n        value() {\n          let clone = document.importNode(tplContent, true)\n\n          // `this` is new Element, diff from `this` of EOF class\n          let shadowRoot = this.createShadowRoot()\n          \n          shadowRoot.appendChild(clone)\n          self._setDataProxy(shadowRoot)\n        }\n      }\n    })\n    \n    document.registerElement(this.name, { prototype: proto })\n  }\n\n  _setDataProxy(doc) {\n    let handleSet = (target, key, value, receiver) => {\n      let idList, oldDataType\n      let newDataType = typeof value\n      \n      if (this._dataKey.hasOwnProperty(key)) {\n        idList = this._dataKey[key]\n        oldDataType = typeof this.data[key]\n      } else {\n        for (let k in this.data) {\n          if (isObjEqual(target, this.data[k])) {\n            idList = this._dataKey[k][key]\n            oldDataType = typeof this.data[k][key]\n          }\n        }\n      }\n      let elms = []\n\n      // if (this.data[key] === value) {\n      if (0) {\n        return\n      } else if (oldDataType !== newDataType) {\n        throw new Error(`Can't change data type from ${oldDataType} to ${newDataType}`)\n      }\n\n      console.log(`set ${key}`)\n      \n      for (let i = idList.length; i--; ) {\n        let id = idList[i]['id'] \n        let allElms = doc.querySelectorAll(`[data-bind-id=\"${id}\"]`)\n        \n        for (let j = allElms.length; j--; ) {\n          let elmInfo = {\n            elm: allElms[j],\n            type: idList[i]['type'],\n            attr: idList[i]['attr']\n          }\n  \n          elms.push(elmInfo)\n        }\n      }\n      \n      for (let i = elms.length; i--; ) {\n        let elm = elms[i]['elm']\n        let type = elms[i]['type']\n        let attr = elms[i]['attr']\n        \n        if (type === 'attr') {\n          elm.setAttribute(attr, value)  \n        } else {\n          elm.textContent = value\n        }\n        \n      }\n      \n      return Reflect.set(target, key, value, receiver)\n    }\n    \n    let handleDefine = (target, key, value, receiver) => {\n      console.log(`define ${key} = ${value}, receiver is ${receiver}`)\n    }\n    \n    let dataProxy = new DataProxy(this.data, {\n      set: handleSet\n      // defineProperty: handleDefine      \n    })\n    \n    this.data = dataProxy.setup()\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import { arrUnique, getValFromExp, objTree, removeObjProxy } from 'utils'\n\nexport default class parser {\n  constructor(tpl, data) {\n    this._data = data\n    this._tpl = tpl\n    this._dataKey = objTree()\n  }\n\n  parse() {\n    let tplStr = this._tpl.innerHTML\n    let attrPattern = /\\w*=\"{{[\\s\\w\\.\\-]*}}\"/g\n    let textPattern = /[^\"]{{[\\s\\w\\.\\-]*}}/g\n    let attrMatch = tplStr.match(attrPattern)\n    let textMatch = tplStr.match(textPattern)\n    attrMatch = arrUnique(attrMatch)\n    textMatch = arrUnique(textMatch)\n    \n    // replace order cannot change! replace attr first.\n    \n    /**\n     * TODO:\n     * multi element has same attr bind\n     * remove same item in array\n     * replace them with same data-bind-key \n     */\n    for (let i = 0; i < attrMatch.length; i++) {\n      let replace = this._replaceVar('attr', tplStr, attrMatch[i])\n      tplStr = replace.htmlStr\n      \n      let dataKeyItem = {\n        id: replace.elmId,\n        type: 'attr',\n        attr: replace.elmAttr\n      }\n      \n      this._setDataKey(replace.key, dataKeyItem)\n    }\n\n    for (let i = 0; i < textMatch.length; i++) {\n      let replace = this._replaceVar('text', tplStr, textMatch[i])\n      tplStr = replace.htmlStr\n      \n      let dataKeyItem = {\n        id: replace.elmId,\n        type: 'text', \n        attr: null\n      }\n      \n      this._setDataKey(replace.key, dataKeyItem)\n    }\n    \n    this._tpl.innerHTML = tplStr;\n    \n    return {\n      tplContent: this._tpl.content,\n      dataKey: removeObjProxy(this._dataKey)\n    }\n  }\n  \n  /**\n   * @param {String} replaceType: attr or text\n   * @param {String} htmlStr: template innerHTML\n   * @param {String} item: replace pattern {{ variable }}\n   * @return {String} htmlStr\n   */\n  _replaceVar(replaceType, htmlStr, item) {\n    let randKey = String(Math.random()).slice(2)\n    let variable = item.match(/{{([\\s\\w\\.\\-]*)}}/)[1]\n    variable = variable.trim()\n    \n    let value = getValFromExp(this._data, variable)\n    let pattern = new RegExp(item, 'g')\n    let attr = null\n    let replaceMent\n\n    if (replaceType === 'attr') {\n      /**\n       * before: <input value=\"{{ abc }}\">\n       * after: <input value=\"xxx\" data-bind-key=\"xyz\">\n       * replace [[ {{ abc }} ]] with [[ xxx\" data-bind-key=\"xyz ]]\n       * so data-bind-key just has singal quotation marks\n       */\n      let bindFlag = `data-bind-id=\"${randKey}`\n      replaceMent = item.replace(/{{[\\s\\w\\.\\-]*}}/, `${value}\" ${bindFlag}`)\n      attr = item.match(/(\\w*)=.*/)[1]   \n    } else {\n      /**\n       * before: <p>hello {{ name }}</p>\n       * after: <p>hello <span data-bind-key=\"xxx\"> xyz </span></p>\n       */\n      let bindFlagStart = `<span data-bind-id=\"${randKey}\">`;\n      let bindFlagEnd = '</span>';\n      replaceMent = `${bindFlagStart}${value}${bindFlagEnd}`;\n    } \n    \n    htmlStr = htmlStr.replace(pattern, replaceMent)\n    \n    return {\n      htmlStr: htmlStr,\n      key: variable,\n      elmId: randKey,\n      elmAttr: attr\n    }    \n  }\n\n  _setDataKey(key, value) {\n    let val = value    // ???\n    if (key.indexOf('.') === -1) {\n      if (this._dataKey.hasOwnProperty(key)) {\n        this._dataKey[key].push(value)\n      } else {\n        this._dataKey[key] = [value]\n      }\n    } else {\n      // console.log(value)   // undefined????\n      \n      let keyArr = key.split('.')\n      let keyLen = keyArr.length\n      let codeStr = 'this._dataKey'\n      let obj = this._dataKey\n      let hasKey = true\n      let value = JSON.stringify(val)\n      \n      for(let i = 0; i < keyLen; i++) {\n        codeStr += `[\"${keyArr[i]}\"]`\n        if (obj.hasOwnProperty(keyArr[i])) {\n          obj = obj[keyArr[i]]\n        } else {\n          hasKey = false\n        }\n      }\n      \n      if (!hasKey) {\n        eval(`${codeStr} = []`)\n      }\n      \n      eval(`${codeStr}.push(${value})`)\n    }\n    \n  }\n  \n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Parser.js\n **/","export function arrUnique(arr) {\n  let obj = {}\n  \n  for (let i = arr.length; i--; ) {\n    arr[i] = arr[i].trim()\n    obj[arr[i]] = null\n  }\n  \n  return Object.keys(obj)\n}\n\nexport function getValFromExp(obj, exp) {\n  if (exp.indexOf('.') === -1) {\n    return obj[exp] ? obj[exp] : ''\n  } else {\n    let expArr = exp.split('.')\n    for (let i = 0; i < expArr.length; i++) {\n      obj = obj[expArr[i]]\n    }\n    \n    return obj\n  }\n}\n\nexport function objTree(target = {}) {\n  let handler = {\n    get(target, key, receiver) {\n      if (!(key in target)) {\n        target[key] = objTree()\n      }\n\n      return Reflect.get(target, key, receiver)\n    }\n  }\n\n  return new Proxy(target, handler)\n}\n\nexport function removeObjProxy(obj) {\n  let clone = {}\n  \n  for (let key in obj) {\n    if (key !== 'splice') {\n      if (obj[key].toString() === \"[object Object]\") {\n        clone[key] = removeObjProxy(obj[key])\n      } else {\n        clone[key] = obj[key]\n      }\n    }\n  }\n  \n  return clone\n}\n\nexport function isObjEqual(a, b) {\n    // Create arrays of property names\n    var aProps = Object.getOwnPropertyNames(a);\n    var bProps = Object.getOwnPropertyNames(b);\n\n    if (aProps.length != bProps.length) {\n        return false;\n    }\n\n    for (var i = 0; i < aProps.length; i++) {\n        var propName = aProps[i];\n\n        // If values of same property are not equal,\n        // objects are not equivalent\n        if (a[propName] !== b[propName]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","export default class DataProxy {\n  constructor(target, handler = {}) {\n    this._target = target\n    this._handler = handler\n  }\n  \n  setup(obj = this._target) {\n    for (let key in obj) {\n      if (typeof obj[key] === 'object') {\n        obj[key] = this.setup(obj[key])\n      }\n    }\n\n    return new Proxy(obj, this._handler)\n  }\n  \n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/DataProxy.js\n **/"],"sourceRoot":""}